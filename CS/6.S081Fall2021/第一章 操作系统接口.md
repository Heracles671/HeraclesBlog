操作系统的作用主要有两个：一个是管理计算机资源分配给多个程序，另一个是在硬件支持的基础上，提供更多有用的服务。操作系统管理底层硬件，并把这些底层硬件抽象化，提供统一的接口给到上层应用，上层应用对底层硬件并无感知。据个例子：一个文字处理程序更本不关心它是用什么类型的磁盘来存储数据的。操作系统给多个程序分享硬件资源，让这些程序能够“同时运行”。最后，操作系统提供了某些控制机制，让这些程序得以相互交互，实现数据分享和合作分工。

操作系统通过接口给用户程序提供服务。接口设计这个活不简单，一方面我们希望接口尽可能的小而美，这样我们在实现的时候就很方便，不容易出错；但是另一方面我们又希望给到应用程序很多高级炫酷的特性，能够覆盖更多的需求。解决这个矛盾的关键是：组合。接口设计依赖于一些机制，这些机制可以相互组合，以此来提供更多的通用性。

本书使用一个单用户操作系统作为具体的例子来阐述操作系统的概念。这个单用户操作系统，即xv6，提供了一些基本的接口，灵感来源于 Ken Thompson 和 Dennis Ritchie 所设计的 Unix 操作系统；并且本系统模仿了 Unix 的内部设计。Unix 接口设计非常简介，但是通过合理的组合，可以实现非常高的通用性。这个接口设计是如此成功以至于后来许多现代操作系统，比如：BSD、Linux、macOS、Solaris，甚至连微软都采用了类似的接口设计。理解和掌握 xv6 对以后学习这些现代操作系统非常有帮助。

如图 1.1 所示，xv6 采用了传统的内核模型。内核是一个为其他程序提供服务的特殊程序。每一个运行中的程序，被称为一个进程，它占用一部分内存，用来存储指令、数据和一个栈。指令用于完成程序的计算工作。数据就是计算过程中用到的变量。至于栈，它被用来组织程序调用流程。通常，一个系统上会有多个进程，但是只有一个内核。
![figure1.1](./img/figure1.1.png)
当一个进程需要使用内核服务时，它会触发一次*系统调用*，即某个操作系统中定义的调用。这个调用过程会传递给内核，由内核来执行并返回。所以进程总是在*用户空间*和*内核空间*交替执行。

